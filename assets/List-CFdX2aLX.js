import{r as t,a7 as $,a6 as P,a9 as nt,_ as at,c as we,Z as z,a5 as Pe,ae as B,ap as Et,aq as wt,bL as Lt,$ as Se,a8 as _t,H as Ze,a0 as qe}from"./index-alDrBFfS.js";var it=t.forwardRef(function(e,d){var c=e.height,s=e.offsetY,f=e.offsetX,v=e.children,l=e.prefixCls,u=e.onInnerResize,b=e.innerProps,h=e.rtl,g=e.extra,n={},m={display:"flex",flexDirection:"column"};return s!==void 0&&(n={height:c,position:"relative",overflow:"hidden"},m=$($({},m),{},P(P(P(P(P({transform:"translateY(".concat(s,"px)")},h?"marginRight":"marginLeft",-f),"position","absolute"),"left",0),"right",0),"top",0))),t.createElement("div",{style:n},t.createElement(nt,{onResize:function(R){var i=R.offsetHeight;i&&u&&u()}},t.createElement("div",at({style:m,className:we(P({},"".concat(l,"-holder-inner"),l)),ref:d},b),v,g)))});it.displayName="Filler";function Dt(e){var d=e.children,c=e.setRef,s=t.useCallback(function(f){c(f)},[]);return t.cloneElement(d,{ref:s})}function zt(e,d,c,s,f,v,l,u){var b=u.getKey;return e.slice(d,c+1).map(function(h,g){var n=d+g,m=l(h,n,{style:{width:s},offsetX:f}),o=b(h);return t.createElement(Dt,{key:o,setRef:function(i){return v(h,i)}},m)})}function Tt(e,d,c){var s=e.length,f=d.length,v,l;if(s===0&&f===0)return null;s<f?(v=e,l=d):(v=d,l=e);var u={__EMPTY_ITEM__:!0};function b(R){return R!==void 0?c(R):u}for(var h=null,g=Math.abs(s-f)!==1,n=0;n<l.length;n+=1){var m=b(v[n]),o=b(l[n]);if(m!==o){h=n,g=g||m!==b(l[n+1]);break}}return h===null?null:{index:h,multiple:g}}function Ct(e,d,c){var s=t.useState(e),f=z(s,2),v=f[0],l=f[1],u=t.useState(null),b=z(u,2),h=b[0],g=b[1];return t.useEffect(function(){var n=Tt(v||[],e||[],d);(n==null?void 0:n.index)!==void 0&&g(e[n.index]),l(e)},[e]),[h]}var Je=(typeof navigator>"u"?"undefined":Pe(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const ut=function(e,d,c,s){var f=t.useRef(!1),v=t.useRef(null);function l(){clearTimeout(v.current),f.current=!0,v.current=setTimeout(function(){f.current=!1},50)}var u=t.useRef({top:e,bottom:d,left:c,right:s});return u.current.top=e,u.current.bottom=d,u.current.left=c,u.current.right=s,function(b,h){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=b?h<0&&u.current.left||h>0&&u.current.right:h<0&&u.current.top||h>0&&u.current.bottom;return g&&n?(clearTimeout(v.current),f.current=!1):(!n||f.current)&&l(),!f.current&&n}};function It(e,d,c,s,f,v,l){var u=t.useRef(0),b=t.useRef(null),h=t.useRef(null),g=t.useRef(!1),n=ut(d,c,s,f);function m(S,y){B.cancel(b.current),u.current+=y,h.current=y,!n(!1,y)&&(Je||S.preventDefault(),b.current=B(function(){var _=g.current?10:1;l(u.current*_),u.current=0}))}function o(S,y){l(y,!0),Je||S.preventDefault()}var R=t.useRef(null),i=t.useRef(null);function M(S){if(e){B.cancel(i.current),i.current=B(function(){R.current=null},2);var y=S.deltaX,_=S.deltaY,G=S.shiftKey,N=y,x=_;(R.current==="sx"||!R.current&&G&&_&&!y)&&(N=_,x=0,R.current="sx");var X=Math.abs(N),k=Math.abs(x);R.current===null&&(R.current=v&&X>k?"x":"y"),R.current==="y"?m(S,x):o(S,N)}}function w(S){e&&(g.current=S.detail===h.current)}return[M,w]}function Ht(e,d,c,s){var f=t.useMemo(function(){return[new Map,[]]},[e,c.id,s]),v=z(f,2),l=v[0],u=v[1],b=function(g){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g,m=l.get(g),o=l.get(n);if(m===void 0||o===void 0)for(var R=e.length,i=u.length;i<R;i+=1){var M,w=e[i],S=d(w);l.set(S,i);var y=(M=c.get(S))!==null&&M!==void 0?M:s;if(u[i]=(u[i-1]||0)+y,S===g&&(m=i),S===n&&(o=i),m!==void 0&&o!==void 0)break}return{top:u[m-1]||0,bottom:u[o]}};return b}var Pt=function(){function e(){wt(this,e),P(this,"maps",void 0),P(this,"id",0),this.maps=Object.create(null)}return Et(e,[{key:"set",value:function(c,s){this.maps[c]=s,this.id+=1}},{key:"get",value:function(c){return this.maps[c]}}]),e}();function $t(e,d,c){var s=t.useState(0),f=z(s,2),v=f[0],l=f[1],u=t.useRef(new Map),b=t.useRef(new Pt),h=t.useRef();function g(){B.cancel(h.current)}function n(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;g();var R=function(){u.current.forEach(function(M,w){if(M&&M.offsetParent){var S=Lt(M),y=S.offsetHeight;b.current.get(w)!==y&&b.current.set(w,S.offsetHeight)}}),l(function(M){return M+1})};o?R():h.current=B(R)}function m(o,R){var i=e(o);u.current.get(i),R?(u.current.set(i,R),n()):u.current.delete(i)}return t.useEffect(function(){return g},[]),[m,n,b.current,v]}var Qe=14/15;function kt(e,d,c){var s=t.useRef(!1),f=t.useRef(0),v=t.useRef(0),l=t.useRef(null),u=t.useRef(null),b,h=function(o){if(s.current){var R=Math.ceil(o.touches[0].pageX),i=Math.ceil(o.touches[0].pageY),M=f.current-R,w=v.current-i,S=Math.abs(M)>Math.abs(w);S?f.current=R:v.current=i,c(S,S?M:w)&&o.preventDefault(),clearInterval(u.current),u.current=setInterval(function(){S?M*=Qe:w*=Qe;var y=Math.floor(S?M:w);(!c(S,y,!0)||Math.abs(y)<=.1)&&clearInterval(u.current)},16)}},g=function(){s.current=!1,b()},n=function(o){b(),o.touches.length===1&&!s.current&&(s.current=!0,f.current=Math.ceil(o.touches[0].pageX),v.current=Math.ceil(o.touches[0].pageY),l.current=o.target,l.current.addEventListener("touchmove",h),l.current.addEventListener("touchend",g))};b=function(){l.current&&(l.current.removeEventListener("touchmove",h),l.current.removeEventListener("touchend",g))},Se(function(){return e&&d.current.addEventListener("touchstart",n),function(){var m;(m=d.current)===null||m===void 0||m.removeEventListener("touchstart",n),b(),clearInterval(u.current)}},[e])}var Ot=10;function Nt(e,d,c,s,f,v,l,u){var b=t.useRef(),h=t.useState(null),g=z(h,2),n=g[0],m=g[1];return Se(function(){if(n&&n.times<Ot){if(!e.current){m(function(T){return $({},T)});return}v();var o=n.targetAlign,R=n.originAlign,i=n.index,M=n.offset,w=e.current.clientHeight,S=!1,y=o,_=null;if(w){for(var G=o||R,N=0,x=0,X=0,k=Math.min(d.length-1,i),j=0;j<=k;j+=1){var A=f(d[j]);x=N;var q=c.get(A);X=x+(q===void 0?s:q),N=X}for(var J=G==="top"?M:w-M,O=k;O>=0;O-=1){var re=f(d[O]),I=c.get(re);if(I===void 0){S=!0;break}if(J-=I,J<=0)break}switch(G){case"top":_=x-M;break;case"bottom":_=X-w+M;break;default:{var Q=e.current.scrollTop,W=Q+w;x<Q?y="top":X>W&&(y="bottom")}}_!==null&&l(_),_!==n.lastTop&&(S=!0)}S&&m($($({},n),{},{times:n.times+1,targetAlign:y,lastTop:_}))}},[n,e.current]),function(o){if(o==null){u();return}if(B.cancel(b.current),typeof o=="number")l(o);else if(o&&Pe(o)==="object"){var R,i=o.align;"index"in o?R=o.index:R=d.findIndex(function(S){return f(S)===o.key});var M=o.offset,w=M===void 0?0:M;m({times:0,index:R,offset:w,originAlign:i})}}}function et(e,d){var c="touches"in e?e.touches[0]:e;return c[d?"pageX":"pageY"]}var tt=t.forwardRef(function(e,d){var c=e.prefixCls,s=e.rtl,f=e.scrollOffset,v=e.scrollRange,l=e.onStartMove,u=e.onStopMove,b=e.onScroll,h=e.horizontal,g=e.spinSize,n=e.containerSize,m=e.style,o=e.thumbStyle,R=t.useState(!1),i=z(R,2),M=i[0],w=i[1],S=t.useState(null),y=z(S,2),_=y[0],G=y[1],N=t.useState(null),x=z(N,2),X=x[0],k=x[1],j=!s,A=t.useRef(),q=t.useRef(),J=t.useState(!1),O=z(J,2),re=O[0],I=O[1],Q=t.useRef(),W=function(){clearTimeout(Q.current),I(!0),Q.current=setTimeout(function(){I(!1)},3e3)},T=v-n||0,oe=n-g||0,L=t.useMemo(function(){if(f===0||T===0)return 0;var H=f/T;return H*oe},[f,T,oe]),ee=function(E){E.stopPropagation(),E.preventDefault()},ne=t.useRef({top:L,dragging:M,pageY:_,startTop:X});ne.current={top:L,dragging:M,pageY:_,startTop:X};var ae=function(E){w(!0),G(et(E,h)),k(ne.current.top),l(),E.stopPropagation(),E.preventDefault()};t.useEffect(function(){var H=function(ie){ie.preventDefault()},E=A.current,F=q.current;return E.addEventListener("touchstart",H),F.addEventListener("touchstart",ae),function(){E.removeEventListener("touchstart",H),F.removeEventListener("touchstart",ae)}},[]);var me=t.useRef();me.current=T;var le=t.useRef();le.current=oe,t.useEffect(function(){if(M){var H,E=function(ie){var ce=ne.current,Re=ce.dragging,Me=ce.pageY,be=ce.startTop;if(B.cancel(H),Re){var pe=et(ie,h)-Me,U=be;!j&&h?U-=pe:U+=pe;var se=me.current,ye=le.current,Le=ye?U/ye:0,te=Math.ceil(Le*se);te=Math.max(te,0),te=Math.min(te,se),H=B(function(){b(te,h)})}},F=function(){w(!1),u()};return window.addEventListener("mousemove",E),window.addEventListener("touchmove",E),window.addEventListener("mouseup",F),window.addEventListener("touchend",F),function(){window.removeEventListener("mousemove",E),window.removeEventListener("touchmove",E),window.removeEventListener("mouseup",F),window.removeEventListener("touchend",F),B.cancel(H)}}},[M]),t.useEffect(function(){W()},[f]),t.useImperativeHandle(d,function(){return{delayHidden:W}});var C="".concat(c,"-scrollbar"),Y={position:"absolute",visibility:re?null:"hidden"},V={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return h?(Y.height=8,Y.left=0,Y.right=0,Y.bottom=0,V.height="100%",V.width=g,j?V.left=L:V.right=L):(Y.width=8,Y.top=0,Y.bottom=0,j?Y.right=0:Y.left=0,V.width="100%",V.height=g,V.top=L),t.createElement("div",{ref:A,className:we(C,P(P(P({},"".concat(C,"-horizontal"),h),"".concat(C,"-vertical"),!h),"".concat(C,"-visible"),re)),style:$($({},Y),m),onMouseDown:ee,onMouseMove:W},t.createElement("div",{ref:q,className:we("".concat(C,"-thumb"),P({},"".concat(C,"-thumb-moving"),M)),style:$($({},V),o),onMouseDown:ae}))}),Yt=20;function rt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,c=e/d*e;return isNaN(c)&&(c=0),c=Math.max(c,Yt),Math.floor(c)}var Ft=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],Xt=[],Wt={overflowY:"auto",overflowAnchor:"none"};function Vt(e,d){var c=e.prefixCls,s=c===void 0?"rc-virtual-list":c,f=e.className,v=e.height,l=e.itemHeight,u=e.fullHeight,b=u===void 0?!0:u,h=e.style,g=e.data,n=e.children,m=e.itemKey,o=e.virtual,R=e.direction,i=e.scrollWidth,M=e.component,w=M===void 0?"div":M,S=e.onScroll,y=e.onVirtualScroll,_=e.onVisibleChange,G=e.innerProps,N=e.extraRender,x=e.styles,X=_t(e,Ft),k=t.useCallback(function(a){return typeof m=="function"?m(a):a==null?void 0:a[m]},[m]),j=$t(k),A=z(j,4),q=A[0],J=A[1],O=A[2],re=A[3],I=!!(o!==!1&&v&&l),Q=t.useMemo(function(){return Object.values(O.maps).reduce(function(a,r){return a+r},0)},[O.id,O.maps]),W=I&&g&&(Math.max(l*g.length,Q)>v||!!i),T=R==="rtl",oe=we(s,P({},"".concat(s,"-rtl"),T),f),L=g||Xt,ee=t.useRef(),ne=t.useRef(),ae=t.useRef(),me=t.useState(0),le=z(me,2),C=le[0],Y=le[1],V=t.useState(0),H=z(V,2),E=H[0],F=H[1],ge=t.useState(!1),ie=z(ge,2),ce=ie[0],Re=ie[1],Me=function(){Re(!0)},be=function(){Re(!1)},pe={getKey:k};function U(a){Y(function(r){var p;typeof a=="function"?p=a(r):p=a;var D=dt(p);return ee.current.scrollTop=D,D})}var se=t.useRef({start:0,end:L.length}),ye=t.useRef(),Le=Ct(L,k),te=z(Le,1),ot=te[0];ye.current=ot;var xe=t.useMemo(function(){if(!I)return{scrollHeight:void 0,start:0,end:L.length-1,offset:void 0};if(!W){var a;return{scrollHeight:((a=ne.current)===null||a===void 0?void 0:a.offsetHeight)||0,start:0,end:L.length-1,offset:void 0}}for(var r=0,p,D,Z,pt=L.length,he=0;he<pt;he+=1){var yt=L[he],xt=k(yt),Ue=O.get(xt),He=r+(Ue===void 0?l:Ue);He>=C&&p===void 0&&(p=he,D=r),He>C+v&&Z===void 0&&(Z=he),r=He}return p===void 0&&(p=0,D=0,Z=Math.ceil(v/l)),Z===void 0&&(Z=L.length-1),Z=Math.min(Z+1,L.length-1),{scrollHeight:r,start:p,end:Z,offset:D}},[W,I,C,L,re,v]),ue=xe.scrollHeight,fe=xe.start,ve=xe.end,$e=xe.offset;se.current.start=fe,se.current.end=ve;var lt=t.useState({width:0,height:v}),ke=z(lt,2),K=ke[0],ct=ke[1],st=function(r){ct({width:r.width||r.offsetWidth,height:r.height||r.offsetHeight})},Oe=t.useRef(),Ne=t.useRef(),ft=t.useMemo(function(){return rt(K.width,i)},[K.width,i]),vt=t.useMemo(function(){return rt(K.height,ue)},[K.height,ue]),_e=ue-v,De=t.useRef(_e);De.current=_e;function dt(a){var r=a;return Number.isNaN(De.current)||(r=Math.min(r,De.current)),r=Math.max(r,0),r}var Ye=C<=0,Fe=C>=_e,Xe=E<=0,We=E>=i,ht=ut(Ye,Fe,Xe,We),ze=function(){return{x:T?-E:E,y:C}},Te=t.useRef(ze()),Ee=Ze(function(a){if(y){var r=$($({},ze()),a);(Te.current.x!==r.x||Te.current.y!==r.y)&&(y(r),Te.current=r)}});function Ve(a,r){var p=a;r?(qe.flushSync(function(){F(p)}),Ee()):U(p)}function St(a){var r=a.currentTarget.scrollTop;r!==C&&U(r),S==null||S(a),Ee()}var Ce=function(r){var p=r,D=i?i-K.width:0;return p=Math.max(p,0),p=Math.min(p,D),p},mt=Ze(function(a,r){r?(qe.flushSync(function(){F(function(p){var D=p+(T?-a:a);return Ce(D)})}),Ee()):U(function(p){var D=p+a;return D})}),gt=It(I,Ye,Fe,Xe,We,!!i,mt),Be=z(gt,2),Ie=Be[0],je=Be[1];kt(I,ee,function(a,r,p){return ht(a,r,p)?!1:(Ie({preventDefault:function(){},deltaX:a?r:0,deltaY:a?0:r}),!0)}),Se(function(){function a(p){I&&p.preventDefault()}var r=ee.current;return r.addEventListener("wheel",Ie),r.addEventListener("DOMMouseScroll",je),r.addEventListener("MozMousePixelScroll",a),function(){r.removeEventListener("wheel",Ie),r.removeEventListener("DOMMouseScroll",je),r.removeEventListener("MozMousePixelScroll",a)}},[I]),Se(function(){if(i){var a=Ce(E);F(a),Ee({x:a})}},[K.width,i]);var Ae=function(){var r,p;(r=Oe.current)===null||r===void 0||r.delayHidden(),(p=Ne.current)===null||p===void 0||p.delayHidden()},Ke=Nt(ee,L,O,l,k,function(){return J(!0)},U,Ae);t.useImperativeHandle(d,function(){return{nativeElement:ae.current,getScrollInfo:ze,scrollTo:function(r){function p(D){return D&&Pe(D)==="object"&&("left"in D||"top"in D)}p(r)?(r.left!==void 0&&F(Ce(r.left)),Ke(r.top)):Ke(r)}}}),Se(function(){if(_){var a=L.slice(fe,ve+1);_(a,L)}},[fe,ve,L]);var Rt=Ht(L,k,O,l),Mt=N==null?void 0:N({start:fe,end:ve,virtual:W,offsetX:E,offsetY:$e,rtl:T,getSize:Rt}),bt=zt(L,fe,ve,i,E,q,n,pe),de=null;v&&(de=$(P({},b?"height":"maxHeight",v),Wt),I&&(de.overflowY="hidden",i&&(de.overflowX="hidden"),ce&&(de.pointerEvents="none")));var Ge={};return T&&(Ge.dir="rtl"),t.createElement("div",at({ref:ae,style:$($({},h),{},{position:"relative"}),className:oe},Ge,X),t.createElement(nt,{onResize:st},t.createElement(w,{className:"".concat(s,"-holder"),style:de,ref:ee,onScroll:St,onMouseEnter:Ae},t.createElement(it,{prefixCls:s,height:ue,offsetX:E,offsetY:$e,scrollWidth:i,onInnerResize:J,ref:ne,innerProps:G,rtl:T,extra:Mt},bt))),W&&ue>v&&t.createElement(tt,{ref:Oe,prefixCls:s,scrollOffset:C,scrollRange:ue,rtl:T,onScroll:Ve,onStartMove:Me,onStopMove:be,spinSize:vt,containerSize:K.height,style:x==null?void 0:x.verticalScrollBar,thumbStyle:x==null?void 0:x.verticalScrollBarThumb}),W&&i>K.width&&t.createElement(tt,{ref:Ne,prefixCls:s,scrollOffset:E,scrollRange:i,rtl:T,onScroll:Ve,onStartMove:Me,onStopMove:be,spinSize:ft,containerSize:K.width,horizontal:!0,style:x==null?void 0:x.horizontalScrollBar,thumbStyle:x==null?void 0:x.horizontalScrollBarThumb}))}var Bt=t.forwardRef(Vt);Bt.displayName="List";export{Bt as L};
